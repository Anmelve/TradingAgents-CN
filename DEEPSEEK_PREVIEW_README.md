# 🚀 TradingAgents-CN v0.1.5-preview

## 🎯 预览版说明

欢迎使用TradingAgents-CN v0.1.5预览版！本版本主要集成了高性价比的DeepSeek V3大语言模型，并优化了配置管理和用户体验。

### ⚠️ 重要提醒

**这是预览版本，仅供测试验证使用！**

- 🧪 **实验性功能**：DeepSeek V3集成和配置统一是新功能，可能存在未知问题
- 👥 **社区测试**：由于开发团队精力有限，我们依靠社区用户进行充分测试
- 🐛 **问题反馈**：如果发现任何问题，请及时反馈给我们
- 📈 **持续改进**：根据用户反馈，我们会持续优化和改进

## 🆕 v0.1.5 新增功能

### DeepSeek V3 模型支持

- ✅ **高性价比**：相比GPT-4显著降低使用成本（输入¥0.0014/1K，输出¥0.0028/1K）
- ✅ **中文优化**：优秀的中文理解和生成能力
- ✅ **成本计算修复**：完整的使用量和成本跟踪，解决了成本显示为¥0.000000的问题
- ✅ **工具调用**：支持Function Calling功能
- ✅ **智能体协作**：与现有多智能体架构无缝集成

### 配置管理优化

- ✅ **统一配置**：解决了Web界面和CLI使用不同配置文件的问题
- ✅ **配置同步**：所有组件现在使用项目根目录的统一配置
- ✅ **维护简化**：不再需要维护多套配置文件

### 用户体验改进

- ✅ **中文化输出**：分析师标签自动转换为中文显示
- ✅ **错误处理**：改进了错误提示和调试信息
- ✅ **日志优化**：清理了冗余的调试日志，输出更简洁

### 基本面分析重构

- ✅ **真实财务指标**：PE、PB、ROE、投资建议等
- ✅ **智能行业识别**：自动识别股票所属行业
- ✅ **专业投资建议**：买入/持有/卖出的中文建议
- ✅ **评分系统**：基本面评分、估值吸引力、成长潜力

## 🧪 测试重点

### 请重点测试以下功能：

#### 1. DeepSeek成本计算

```bash
# 配置DeepSeek API密钥
echo "DEEPSEEK_API_KEY=your_api_key" >> .env

# 测试成本计算是否正常显示
# 应该看到类似：💰 [DeepSeek] 本次调用成本: ¥0.002800
# 而不是：💰 [DeepSeek] 本次调用成本: ¥0.000000
```

#### 2. 配置统一验证

```bash
# 测试配置统一
python tests/test_unified_config.py

# 验证Web界面和CLI使用相同配置
# 检查配置目录是否为：C:\code\TradingAgentsCN\config
```

#### 3. 中文化输出

```bash
# 测试中文化分析师输出
# 应该看到：看涨分析师: [内容]
# 而不是：Bull Analyst: [内容]

# 测试最终投资建议中文化
# 应该看到中文投资建议，而不是英文
```

#### 4. Web界面测试

```bash
# 启动Web界面
streamlit run web/app.py

# 测试项目：
# - DeepSeek模型选择和成本显示
# - 配置管理页面功能
# - 中文化分析结果
# - Token使用统计
```

#### 5. CLI界面测试

```bash
# 启动CLI界面
python -m cli.main

# 测试项目：
# - 选择DeepSeek提供商
# - 股票分析流程
# - 成本计算显示
# - 中文化结果输出
```

## 📊 已知问题和限制

### 当前已知问题

- ⏱️ **响应时间**：首次调用可能较慢，后续会改善
- 📱 **移动端适配**：Web界面在移动设备上可能显示不完美

### 功能限制

- 🚫 **模型限制**：目前只支持deepseek-chat和deepseek-coder模型
- 📈 **数据源**：仍使用TongDaXin API，下个版本将替换为Tushare
- 🌐 **网络依赖**：需要稳定的网络连接访问DeepSeek API

## 🐛 问题反馈

### 如何报告问题

1. **GitHub Issues**：https://github.com/hsliuping/TradingAgents-CN/issues
2. **问题模板**：
   ```markdown
   ## 问题描述
   简要描述遇到的问题

   ## 复现步骤
   1. 执行的命令或操作
   2. 预期结果
   3. 实际结果

   ## 环境信息
   - 操作系统：
   - Python版本：
   - DeepSeek API密钥状态：
   - 错误日志：
   ```

### 测试反馈

即使没有问题，也欢迎分享测试体验：

- ✅ **成功案例**：分享成功的使用场景
- 💡 **改进建议**：提出功能改进建议
- 📈 **性能反馈**：分享性能和准确性体验
- 🎯 **使用场景**：分享实际应用场景

## 🚀 快速开始

### 1. 环境准备

```bash
# 克隆预览分支
git clone -b feature/deepseek-v3-integration https://github.com/hsliuping/TradingAgents-CN.git
cd TradingAgents-CN

# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
# 编辑.env文件，添加DeepSeek API密钥
```

### 2. 获取DeepSeek API密钥

1. 访问 [DeepSeek平台](https://platform.deepseek.com/)
2. 注册账号并登录
3. 进入API Keys页面
4. 创建新的API Key
5. 复制API Key到.env文件

### 3. 开始测试

```bash
# Web界面测试
streamlit run web/app.py

# CLI界面测试
python -m cli.main

# 单元测试
python -m pytest tests/ -v
```

## 📈 版本规划

### 当前版本：v0.1.5-preview

- 🎯 **目标**：验证DeepSeek集成稳定性和配置统一
- ⏰ **预览期**：预计1-2周
- 📊 **成功标准**：DeepSeek成本计算正常，配置统一，用户反馈良好

### 下一版本：v0.1.6 - Tushare数据源集成

- 📊 **Tushare集成**：替换TongDaXin API，使用Tushare作为A股数据源
- 🏛️ **合规性改进**：解决数据源法律合规问题
- 🔄 **数据缓存优化**：改进本地缓存策略，减少API调用
- 📈 **数据质量提升**：更准确的A股财务数据和实时行情

#### Tushare集成特性

- **多数据类型支持**：实时行情、财务数据、公司信息、技术指标
- **智能缓存策略**：分级缓存，根据数据类型设置不同过期时间
- **故障转移机制**：主数据源 + 备用数据源，确保数据获取稳定性
- **成本控制**：合理的API调用频率限制，避免超出配额


## 🤝 参与贡献

### 测试贡献

- 🧪 **功能测试**：测试各项功能是否正常工作
- 📊 **性能测试**：测试系统性能和响应速度
- 🔍 **边界测试**：测试极端情况和错误处理
- 📱 **兼容性测试**：测试不同环境下的兼容性

### 代码贡献

- 🐛 **Bug修复**：修复发现的问题
- ✨ **功能改进**：优化现有功能
- 📚 **文档改进**：完善文档和示例
- 🧪 **测试增强**：增加测试用例

## 📞 联系我们

- **GitHub Issues**：问题报告和功能请求
- **GitHub Discussions**：社区讨论和经验分享
- **项目文档**：详细的技术文档

---

**感谢您参与TradingAgents-CN v0.1.5预览版测试！**

您的反馈对我们非常宝贵，将帮助我们打造更好的AI金融分析工具。🎉

---

**最后更新**：2025年7月9日
**版本**：v0.1.5-preview
**分支**：feature/deepseek-v3-integration
